import{a as V}from"./chunk-O57A3VT7.js";import{a as A}from"./chunk-G3PGNMAQ.js";import{a as N}from"./chunk-ZDQ2A3WC.js";import{a as f}from"./chunk-OPDM7W52.js";import{$b as d,Cb as I,Lb as b,Mb as v,Ob as C,S as P,Sa as M,Ua as a,V as x,Ya as W,_ as h,_a as E,_b as O,aa as y,ba as w,cb as S,eb as u,ec as T,fb as R,gb as k,ib as m,kb as c,lb as _,lc as X,mb as g,mc as z,sb as B,tb as F,tc as D,v as l}from"./chunk-Z37IT2PE.js";var H=["slider"],L=["thumb"];function q(n,s){n&1&&g(0,"div",9)}function G(n,s){if(n&1&&(c(0,"div",7),m(1,q,1,0,"div",8),_()),n&2){let p=s.$implicit,t=s.last;R("max-width",p,"%"),a(1),u("ngIf",!t)}}function U(n,s){if(n&1&&(c(0,"div",5),m(1,G,2,3,"div",6),_()),n&2){let p=F();a(1),u("ngForOf",p._stepsPoints)}}var dt=(()=>{let s=class s{constructor(){this._formField=h(V,{optional:!0}),this._destroyRef=h(W),this._renderer=h(M),this._document=h(T),this.showSteps=!0,this.disabled=!1,this.changed=new E,this._stepsPoints=[],this._sliderWidth=0,this._thumbWidth=0,this._moving=!1,this._clientX=0,this._offset=0,this._tmpOffset=0,this._onChange=()=>{},this._onTouched=()=>{}}get id(){return this._formField?.id||null}ngOnInit(){if(this.step>0){let t=Math.ceil((this.max-this.min)/this.step);for(let e=1;e<=t;e++){let i=100/t*e;this._stepsPoints.push(i)}}this._thumbWidth=this._thumb.nativeElement.getBoundingClientRect().width,this._tmpOffset=this._offset,l(this._thumb.nativeElement,"mousedown").pipe(f(this._destroyRef)).subscribe(t=>{this._moving=!0,this._sliderWidth=this._slider.nativeElement.getBoundingClientRect().width,this._clientX=t.clientX}),l(this._document,"mousemove").pipe(f(this._destroyRef)).subscribe(t=>{if(this._moving){let e=this._offset+t.clientX-this._clientX;if(this._stepsPoints.length>0){let i=Math.ceil(e/this._sliderWidth*100),r=this.step/(this.max-this.min)*100,o=this._sliderWidth*this.step/(this.max-this.min);e=Math.round(i/r)*o-this._thumbWidth/2}e<=0&&(e=0),e>=this._sliderWidth-this._thumbWidth&&(e=this._sliderWidth-this._thumbWidth),this._renderer.setStyle(this._thumb.nativeElement,"inset-inline-start",e+"px"),this._tmpOffset=e,this._emitChangeEvent(e)}}),l(this._document,"mouseup").pipe(f(this._destroyRef)).subscribe(t=>{this._moving&&(this._offset=this._tmpOffset,this._moving=!1)}),this._calcOffsetByValue()}handleClick(t){let e=t.target;if(this._sliderWidth=this._slider.nativeElement.getBoundingClientRect().width,this._clientX=t.clientX,e!==this._thumb.nativeElement){let i=t.clientX-this._slider.nativeElement.getBoundingClientRect().x-this._thumbWidth/2;if(this._stepsPoints.length>0){let r=Math.ceil(i/this._sliderWidth*100),o=this.step/(this.max-this.min)*100,Q=this._sliderWidth*this.step/(this.max-this.min);i=Math.round(r/o)*Q-this._thumbWidth/2}i<=0&&(i=0),i>=this._sliderWidth-this._thumbWidth&&(i=this._sliderWidth-this._thumbWidth),this._renderer.setStyle(this._thumb.nativeElement,"inset-inline-start",i+"px"),this._offset=i,this._moving=!0,this._emitChangeEvent(i)}}writeValue(t){this.value=t,this._calcOffsetByValue()}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=N(t)}_emitChangeEvent(t){let e=this._sliderWidth-this._thumbWidth;t<=0&&(t=0),t>=e&&(t=e);let i=t/e,r=i<=.5?Math.ceil(i*(this.max-this.min)+this.min):Math.floor(i*(this.max-this.min)+this.min);r!==this.value&&(this.value=r,this._onChange(this.value),this.changed.emit(this.value))}_calcOffsetByValue(){if(this.value){let t=this._slider.nativeElement.getBoundingClientRect().width,e=(this.value-this.min)/(this.max-this.min),i=t*e-this._thumbWidth/2;i<=0&&(i=0),i>=t-this._thumbWidth/2&&(i=t-this._thumbWidth),this._offset=i,this._renderer.setStyle(this._thumb.nativeElement,"inset-inline-start",i+"px")}}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=y({type:s,selectors:[["ult-slider"]],viewQuery:function(e,i){if(e&1&&(v(H,7),v(L,7)),e&2){let r;b(r=C())&&(i._slider=r.first),b(r=C())&&(i._thumb=r.first)}},hostAttrs:[1,"ult-slider"],hostVars:2,hostBindings:function(e,i){e&1&&B("mousedown",function(o){return i.handleClick(o)}),e&2&&k("is-disabled",i.disabled)},inputs:{max:["max","max",d],min:["min","min",d],step:["step","step",d],value:["value","value",d],showSteps:["showSteps","showSteps",O],disabled:["disabled","disabled",O]},outputs:{changed:"changed"},exportAs:["ultSlider"],features:[I([{provide:A,useExisting:P(()=>s),multi:!0}]),S],decls:5,vars:1,consts:[[1,"track"],["slider",""],["class","steps",4,"ngIf"],[1,"thumb"],["thumb",""],[1,"steps"],["class","step",3,"max-width",4,"ngFor","ngForOf"],[1,"step"],["class","step-dot",4,"ngIf"],[1,"step-dot"]],template:function(e,i){e&1&&(c(0,"div",0,1),m(2,U,2,1,"div",2),_(),g(3,"button",3,4)),e&2&&(a(2),u("ngIf",i.showSteps))},dependencies:[X,z],styles:["[_nghost-%COMP%]{display:flex;position:relative;-webkit-user-select:none;user-select:none;align-items:center;width:100%;flex:none;height:var(--ult-slider-height)}[_nghost-%COMP%]:focus-visible{outline:var(--ult-outline-size) solid var(--ult-outline-color);outline-offset:var(--ult-outline-offset)}.is-disabled[_nghost-%COMP%]{opacity:var(--ult-control-opacity);pointer-events:none}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]{position:absolute;border-radius:var(--ult-slider-border-radius);width:100%;height:var(--ult-slider-track-height);background:var(--ult-slider-track-bg);inset-inline-start:0;inset-inline-end:0;top:50%;transform:translateY(-50%)}[_nghost-%COMP%]   .thumb[_ngcontent-%COMP%]{position:absolute;display:inline-block;inset-inline-start:0;top:0;border:none;cursor:pointer;border-radius:var(--ult-slider-thumb-border-radius);flex:none;width:var(--ult-slider-thumb-size);height:var(--ult-slider-thumb-size);background:var(--ult-slider-thumb-bg);box-shadow:var(--ult-slider-thumb-shadow);z-index:1}[_nghost-%COMP%]   .thumb[_ngcontent-%COMP%]:focus-within, [_nghost-%COMP%]   .thumb[_ngcontent-%COMP%]:focus-visible{outline:none}[_nghost-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{box-shadow:var(--ult-slider-thumb-hover-shadow)}[_nghost-%COMP%]:active   .thumb[_ngcontent-%COMP%]{scale:var(--ult-slider-thumb-active-scale);box-shadow:var(--ult-slider-thumb-hover-shadow)}[_nghost-%COMP%]   .steps[_ngcontent-%COMP%]{position:absolute;border-radius:var(--ult-slider-border-radius);height:var(--ult-slider-track-height);flex:none;display:flex;align-items:center;justify-content:space-between;inset:0;z-index:0}[_nghost-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;flex-grow:1;height:100%}[_nghost-%COMP%]   .step[_ngcontent-%COMP%]:first-child{border-start-start-radius:var(--ult-slider-thumb-border-radius);border-end-start-radius:var(--ult-slider-thumb-border-radius)}[_nghost-%COMP%]   .step[_ngcontent-%COMP%]:last-child{border-start-end-radius:var(--ult-slider-thumb-border-radius);border-end-end-radius:var(--ult-slider-thumb-border-radius)}.step-dot[_ngcontent-%COMP%]{line-height:.0625rem;width:var(--ult-slider-step-dot-size);height:var(--ult-slider-step-dot-size);flex:none;background:var(--ult-slider-step-dot-bg);border-radius:50%}"]});let n=s;return n})();var ut=(()=>{let s=class s{};s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=w({type:s}),s.\u0275inj=x({imports:[D]});let n=s;return n})();export{dt as a,ut as b};
